<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<title>RadioGroup</title>
		<link rel="icon" type="image/png" href="radio-button.png" />
		<link
			rel="stylesheet"
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
			integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
			crossorigin="anonymous"
		/>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/themes/prism.min.css"
			integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ=="
			crossorigin="anonymous"
		/>
		<style>
			.Form__radio {
				display: flex;
			}

			.Form__radio__input {
				position: relative;
				height: 24px;
				width: 24px;
				margin-right: 12px;
				border-radius: 12px;
				border: 1px solid black;
				flex: 0 0 auto;
			}

			.Form__radio__input::after {
				position: absolute;
				top: 0;
				right: 0;
				bottom: 0;
				left: 0;
				margin: 3px;
				border-radius: 12px;
				content: '';
			}

			.Form__radio.is-selected .Form__radio__input::after {
				background-color: black;
			}

			.Form__star {
				height: 24px;
				width: 24px;
				fill: #858585;
			}

			.Form__star:hover {
				cursor: pointer;
			}

			.Form__radio:hover .Form__star {
				opacity: 0.7;
			}

			.Form__radio:hover .Form__star,
			.Form__radio.is-selected .Form__star,
			.Form__radio:hover ~ .Form__radio .Form__star,
			.Form__radio.is-selected ~ .Form__radio .Form__star {
				fill: #ffc107 !important;
			}

			.is-off {
				opacity: 0.3;
				cursor: not-allowed;
			}
			.Alert {
				margin: 1em;
				position: fixed;
				top: 0;
				right: 0;
				z-index: 10;
			}
		</style>
	</head>
	<body>
		<div class="Alert js-alert"></div>

		<div class="container">
			<div class="col-12 my-5">
				<h1 class="m-0">
					<a href="https://github.com/19h47/19h47-radiogroup">RadioGroup </a>
				</h1>
			</div>
			<div class="col-12 my-5">
				<pre
					class="p-3 m-0"
				><code class="language-javascript">import RadioGroup from '@19h47/radiogroup';

const $element = document.querySelector('[role="radiogroup"]');
const radiogroup = new RadioGroup($element);

radiogroup.init();</code></pre>
			</div>
			<div class="col-12 my-5">
				<form class="Form border p-3">
					<div
						role="radiogroup"
						aria-labelledby="japan-condiments"
						data-name="japan-condiments"
						data-tagger='[{"label":"Black vinegar","value":"black_vinegar","selected":true},{"label":"Chili oil","value":"chili_oil"},{"label":"Dashi","value":"dashi"},{"label":"Fukujinzuke","value":"fukujinzuke"},{"label":"Furikake","value":"furikake"},{"label":"Gomashio","value":"gomashio"}]'
					>
						<h2 id="japan-condiments" class="mb-3 h3">
							Japan condiments<sup class="js-radio-group-value">Black vinegar</sup>
						</h2>
					</div>
				</form>
			</div>

			<div class="col-12 my-5">
				<form class="Form border p-3">
					<div role="radiogroup" aria-labelledby="pizza-condiments">
						<h2 id="pizza-condiments" class="mb-3 h3">
							Pizza Condiments<sup class="js-radio-group-value">Black olives</sup>
						</h2>

						<div
							class="Form__radio form-group is-selected m-3"
							aria-checked="true"
							tabindex="0"
							role="radio"
						>
							<span class="Form__radio__input"></span>
							<span class="Form__radio__label js-label">Black olives</span>
							<div class="d-none">
								<input
									type="radio"
									id="black-olives"
									name="pizza_condiments"
									value="black-olives"
									checked
								/>
							</div>
						</div>

						<div
							class="Form__radio form-group m-3"
							aria-checked="false"
							tabindex="-1"
							role="radio"
						>
							<span class="Form__radio__input"></span>
							<span class="Form__radio__label js-label">Cheeses</span>
							<div class="d-none">
								<input
									type="radio"
									id="cheeses"
									name="pizza_condiments"
									value="cheeses"
								/>
							</div>
						</div>

						<fieldset class="border">
							<div class="form-group m-3 row js-cheese is-off">
								<label class="col-sm-2 px-0 col-form-label" for="mozzarella">
									Mozzarella
								</label>
								<div class="col-sm-10 px-0">
									<input
										class="form-control"
										id="mozzarella"
										type="text"
										name="mozzarella"
										placeholder="ex. 1"
										tabindex="-1"
									/>
								</div>
							</div>
							<div class="form-group m-3 row js-cheese is-off">
								<label class="col-sm-2 px-0 col-form-label" for="cheddar">
									Cheddar
								</label>
								<div class="col-sm-10 px-0">
									<input
										class="form-control"
										id="cheddar"
										name="cheddar"
										type="text"
										placeholder="ex. 1"
										tabindex="-1"
										disabled
									/>
								</div>
							</div>

							<div class="form-group m-3 row js-cheese is-off">
								<label class="col-sm-2 px-0 col-form-label" for="emmental">
									Emmental
								</label>
								<div class="col-sm-10 px-0">
									<input
										class="form-control"
										id="emmental"
										type="text"
										name="emmental"
										placeholder="ex. 1"
										tabindex="-1"
										disabled
									/>
								</div>
							</div>
						</fieldset>

						<div
							class="Form__radio form-group m-3 is-off"
							aria-checked="false"
							aria-disabled="true"
							tabindex="-1"
							role="radio"
						>
							<span class="Form__radio__input"></span>
							<span class="Form__radio__label js-label">Spinach</span>
							<div class="d-none">
								<input
									type="radio"
									id="spinach"
									name="pizza_condiments"
									value="spinach"
									disabled
								/>
							</div>
						</div>

						<div
							class="Form__radio form-group m-3"
							aria-checked="false"
							tabindex="-1"
							role="radio"
						>
							<span class="Form__radio__input"></span>
							<span class="Form__radio__label js-label">Kale</span>
							<div class="d-none">
								<input
									type="radio"
									id="kale"
									name="pizza_condiments"
									value="kale"
								/>
							</div>
						</div>
					</div>
				</form>
			</div>

			<div class="col-12 my-5">
				<fieldset class="border p-3">
					<div id="control-radiogroup" role="radiogroup" aria-labelledby="control-label">
						<h2 id="control-label" class="mb-3 h3">
							Control&nbsp;<sup class="js-radio-group-value"
								>Never gonna let you down</sup
							>
						</h2>
						<p>Disable or enable programmatically a radiogroup</p>
						<div class="input-group my-3">
							<div class="input-group-prepend">
								<div class="input-group-text">
									<input
										type="checkbox"
										value="never-gonna-give-you-up"
										class="js-control"
									/>
								</div>
							</div>
							<div class="border flex-grow-1">
								<div
									class="Form__radio p-3 is-off js-control-radio"
									aria-checked="false"
									tabindex="-1"
									role="radio"
									aria-disabled="true"
								>
									<span class="Form__radio__input"></span>
									<span class="Form__radio__label js-label">
										Never gonna give you up
									</span>
									<div class="d-none">
										<input
											type="radio"
											name="rickroll"
											disabled
											value="never-gonna-give-you-up"
										/>
									</div>
								</div>
							</div>
						</div>
						<div class="input-group my-3">
							<div class="input-group-prepend">
								<div class="input-group-text">
									<input
										type="checkbox"
										value="never-gonna-let-you-down"
										class="js-control"
									/>
								</div>
							</div>

							<div class="border flex-grow-1">
								<div
									class="Form__radio p-3 is-off is-selected js-control-radio"
									aria-checked="true"
									tabindex="-1"
									role="radio"
									aria-disabled="true"
								>
									<span class="Form__radio__input"></span>
									<span class="Form__radio__label js-label">
										Never gonna let you down
									</span>
									<div class="d-none">
										<input
											type="radio"
											name="rickroll"
											value="never-gonna-let-you-down"
											disabled
											checked
										/>
									</div>
								</div>
							</div>
						</div>
						<div class="input-group my-3">
							<div class="input-group-prepend">
								<div class="input-group-text">
									<input
										type="checkbox"
										value="never-gonna-run-around-and-desert-you"
										class="js-control"
									/>
								</div>
							</div>
							<div class="border flex-grow-1">
								<div
									class="Form__radio p-3 is-off js-control-radio"
									aria-checked="false"
									tabindex="-1"
									role="radio"
									aria-disabled="true"
								>
									<span class="Form__radio__input"></span>
									<span class="Form__radio__label js-label"
										>Never gonna run around and desert you</span
									>
									<div class="d-none">
										<input
											type="radio"
											name="rickroll"
											value="never-gonna-run-around-and-desert-you"
											disabled
										/>
									</div>
								</div>
							</div>
						</div>
						<div class="input-group my-3">
							<div class="input-group-prepend">
								<div class="input-group-text">
									<input
										type="checkbox"
										value="never-gonna-make-you-cry"
										checked
										class="js-control"
									/>
								</div>
							</div>
							<div class="border flex-grow-1">
								<div
									class="Form__radio p-3"
									aria-checked="false"
									tabindex="-1"
									role="radio"
								>
									<span class="Form__radio__input"></span>
									<span class="Form__radio__label js-label">
										Never gonna make you cry
									</span>
									<div class="d-none">
										<input
											type="radio"
											name="rickroll"
											value="never-gonna-make-you-cry"
										/>
									</div>
								</div>
							</div>
						</div>
						<div class="input-group my-3">
							<div class="input-group-prepend">
								<div class="input-group-text">
									<input
										type="checkbox"
										value="never-gonna-say-goodbye"
										class="js-control"
										checked
									/>
								</div>
							</div>
							<div class="border flex-grow-1">
								<div
									class="Form__radio p-3"
									aria-checked="false"
									tabindex="-1"
									role="radio"
								>
									<span class="Form__radio__input"></span>
									<span class="Form__radio__label js-label"
										>Never gonna say goodbye</span
									>
									<div class="d-none">
										<input
											type="radio"
											name="rickroll"
											value="never-gonna-say-goodbye"
										/>
									</div>
								</div>
							</div>
						</div>
						<div class="input-group my-3">
							<div class="input-group-text">
								<input
									type="checkbox"
									value="never-gonna-tell-a-lie-and-hurt-you"
									class="js-control"
									checked
								/>
							</div>
							<div class="border flex-grow-1">
								<div
									class="Form__radio p-3"
									aria-checked="false"
									tabindex="-1"
									role="radio"
								>
									<span class="Form__radio__input"></span>
									<span class="Form__radio__label js-label"
										>Never gonna tell a lie and hurt you</span
									>
									<div class="d-none">
										<input
											type="radio"
											name="rickroll"
											value="never-gonna-tell-a-lie-and-hurt-you"
										/>
									</div>
								</div>
							</div>
						</div>
					</div>
				</fieldset>
			</div>

			<div class="col-12 my-5">
				<p>
					Thanks to customs events we can programmatically change the current selected
					radio.
				</p>

				<pre
					class="p-3 m-0"
				><code class="language-javascript">import RadioGroup from '@19h47/radiogroup';

const $element = document.querySelector('[role="radiogroup"]');
const $select = document.querySelector('select');
const radiogroup = new RadioGroup($element);

radiogroup.init();

radiogroup.radios.forEach(radio => {
	const { $input: { value } } = radio; // Grab the input value

	radio.on('Radio.activate', () => {
		[...$select.options].forEach(option => {

			if (value === option.value) {
				option.selected = true;
			} else {
				option.selected = false;
			}
		});
	}
});</code></pre>
			</div>

			<div class="col-12 my-5">
				<form class="Form border p-3">
					<div
						role="radiogroup"
						aria-labelledby="american-condiments"
						data-name="american-condiments"
						data-tagger='[{"label":"Mayonnaise","value":"mayonnaise","selected":true},{"label":"Ketchup","value":"ketchup"},{"label":"Soy sauce","value":"soy-sauce"},{"label":"Salsa","value":"salsa"},{"label":"Mustard","value":"mustard"},{"label":"Hot sauce","value":"hot-sauce"}]'
					>
						<h2 id="american-condiments" class="m-0 h3">
							American condiments<sup class="js-radio-group-value">Mayonnaise</sup>
						</h2>
						<select
							class="custom-select my-3 js-select"
							aria-label="Select an american condiments"
						>
							<option value="mayonnaise" selected>Mayonnaise</option>
							<option value="ketchup">Ketchup</option>
							<option value="soy-sauce">Soy sauce</option>
							<option value="salsa">Salsa</option>
							<option value="mustard">Mustard</option>
							<option value="hot-sauce">Hot sauce</option>
						</select>
					</div>
				</form>
			</div>

			<div class="col-12 my-5">
				<form class="Form border p-3">
					<div role="radiogroup" aria-labelledby="condiments">
						<h2 id="condiments" class="mb-3 h3">
							Condiments<sup class="js-radio-group-value">Savora</sup>
						</h2>

						<div class="input-group my-3">
							<input
								class="form-control js-input"
								type="text"
								name="condiments"
								placeholder="ex. 1"
								aria-label="Add a condiments"
							/>
							<div class="input-group-append">
								<button class="btn btn-outline-secondary js-button" type="button">
									Add
								</button>
							</div>
						</div>

						<div
							class="Form__radio form-group is-selected m-3"
							aria-checked="true"
							tabindex="0"
							role="radio"
						>
							<span class="Form__radio__input"></span>
							<span class="Form__radio__label js-label">Savora</span>
							<div class="d-none">
								<input
									type="radio"
									id="savora"
									name="condiments"
									value="savora"
									checked
								/>
							</div>
						</div>

						<div
							class="Form__radio form-group m-3"
							aria-checked="false"
							tabindex="-1"
							role="radio"
						>
							<span class="Form__radio__input"></span>
							<span class="Form__radio__label js-label">Tapenade</span>
							<div class="d-none">
								<input
									type="radio"
									id="tapenade"
									name="condiments"
									value="tapenade"
								/>
							</div>
						</div>
					</div>
				</form>
			</div>

			<div class="col-12 my-5">
				<form class="Form border p-3" aria-labelledby="rating-star">
					<div role="radiogroup">
						<h2 id="rating-star" class="mb-3 h3">
							Star rating<sup class="js-radio-group-value">1</sup>
						</h2>

						<div class="d-flex flex-row-reverse justify-content-end">
							<div
								class="Form__radio"
								aria-checked="false"
								tabindex="-1"
								role="radio"
							>
								<span class="d-none js-label">5</span>
								<svg role="img" viewBox="0 0 576 512" class="Form__star">
									<path
										d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"
									></path>
								</svg>
								<input
									id="star-5"
									type="radio"
									name="option"
									value="5"
									style="display: none"
								/>
							</div>
							<div
								class="Form__radio"
								aria-checked="false"
								tabindex="-1"
								role="radio"
							>
								<span class="d-none js-label">4</span>
								<svg role="img" viewBox="0 0 576 512" class="Form__star">
									<path
										d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"
									></path>
								</svg>
								<input
									id="star-4"
									type="radio"
									name="option"
									value="4"
									style="display: none"
								/>
							</div>
							<div
								class="Form__radio"
								aria-checked="false"
								tabindex="-1"
								role="radio"
							>
								<span class="d-none js-label">3</span>
								<svg role="img" viewBox="0 0 576 512" class="Form__star">
									<path
										d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"
									></path>
								</svg>
								<input
									id="star-3"
									type="radio"
									name="option"
									value="3"
									style="display: none"
								/>
							</div>
							<div
								class="Form__radio"
								aria-checked="false"
								tabindex="-1"
								role="radio"
							>
								<span class="d-none js-label">2</span>
								<svg role="img" viewBox="0 0 576 512" class="Form__star">
									<path
										d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"
									></path>
								</svg>
								<input
									id="star-2"
									type="radio"
									name="option"
									value="2"
									style="display: none"
								/>
							</div>
							<div
								class="Form__radio is-selected"
								aria-checked="true"
								tabindex="0"
								role="radio"
							>
								<span class="d-none js-label">1</span>
								<svg role="img" viewBox="0 0 576 512" class="Form__star">
									<path
										d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"
									></path>
								</svg>
								<input
									id="star-1"
									type="radio"
									name="option"
									value="1"
									checked
									style="display: none"
								/>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/prism.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.22.0/plugins/autoloader/prism-autoloader.min.js"></script>

		<script src="./main.js"></script>
		<script>
			// https://gist.github.com/hagemann/382adfc57adbd5af078dc93feef01fe1
			const slugify = string => {
				const a =
					'àáâäæãåāăąçćčđďèéêëēėęěğǵḧîïíīįìłḿñńǹňôöòóœøōõőṕŕřßśšşșťțûüùúūǘůűųẃẍÿýžźż·/_,:;';
				const b =
					'aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------';
				const p = new RegExp(a.split('').join('|'), 'g');

				return string
					.toString()
					.toLowerCase()
					.replace(/\s+/g, '-') // Replace spaces with -
					.replace(p, c => b.charAt(a.indexOf(c))) // Replace special characters
					.replace(/&/g, '-and-') // Replace & with 'and'
					.replace(/[^\w\-]+/g, '') // Remove all non-word characters
					.replace(/\-\-+/g, '-') // Replace multiple - with single -
					.replace(/^-+/, '') // Trim - from start of text
					.replace(/-+$/, ''); // Trim - from end of text
			};

			const elements = [...document.querySelectorAll('[role="radiogroup"]')];
			const template = (label, value, selected, name) =>
				'<div class="Form__radio form-group m-3' +
				(selected ? ' is-selected' : '') +
				'" aria-checked="' +
				(selected ? 'true' : 'false') +
				'" tabindex="' +
				(selected ? '0' : '-1') +
				'" role="radio"><span class="Form__radio__input"></span><span class="Form__radio__label js-label">' +
				label +
				'</span><div class="d-none"><input type="radio" id="' +
				slugify(value) +
				'" name="' +
				slugify(name) +
				'" value="' +
				slugify(value) +
				'" ' +
				(selected ? 'checked' : '') +
				'></div></div>';
			const cheeses = [...document.querySelectorAll('.js-cheese')];
			const alert = content => {
				const div = document.createElement('div');

				div.className = 'toast fade show';
				div.style = 'toast fade show';
				div.innerHTML = `<div class="toast-body">${content}</div>`;

				div.setAttribute('role', 'alert');
				div.setAttribute('aria-live', 'assertive');
				div.setAttribute('aria-atomic', 'true');

				return div;
			};
			const $alert = document.querySelector('.js-alert');
			const onRadioChange = content => {
				const $el = alert(content);

				$alert.appendChild($el);

				$el.addEventListener(
					'click',
					() => $el.style.setProperty('display', 'none'),
					false,
				);

				setTimeout(() => $el.parentNode.removeChild($el), 2000);
			};
			const controls = [...document.querySelectorAll('.js-control')];

			controls.forEach($control => {
				$control.addEventListener('input', ({ target }) => {
					elements.forEach(element =>
						element.dispatchEvent(
							new CustomEvent('Control.input', {
								detail: { checked: target.checked, value: target.value },
							}),
						),
					);
				});
			});

			elements.forEach(element => {
				const $value = element.querySelector('.js-radio-group-value');
				const $select = element.querySelector('.js-select');
				const tagger = JSON.parse(element.getAttribute('data-tagger')) || [];
				const name = element.getAttribute('data-name') || '';
				const $add = element.querySelector('.js-button');
				const $input = element.querySelector('.js-input');

				const radiogroup = new RadioGroup.default(element, { tagger, template, name });

				const setValue = item => {
					const value = item.querySelector('.js-label').innerHTML;

					$value.innerHTML = value;
				};

				radiogroup.init();

				if ('control-radiogroup' === element.id) {
					element.addEventListener('Control.input', ({ detail: { checked, value } }) => {
						radiogroup.radios.forEach((radio, index) => {
							if (radio.$input.value === value && checked) {
								radio.enable();

								radio.rootElement.classList.remove('is-off');

								radiogroup.destroy();
								radiogroup.init();

								radiogroup.radios.forEach(radio => {
									radio.on('Radio.deactivate', ({ event, value }) => {
										onRadioChange(
											`<strong>${value}</strong> has been deactivated!`,
										);
									});

									radio.on('Radio.activate', ({ event, value }) => {
										onRadioChange(
											`<strong>${value}</strong> has been activated!`,
										);

										setValue(radio.rootElement);
									});
								});
							}

							if (radio.$input.value === value && !checked) {
								radio.disable();

								radio.rootElement.classList.add('is-off');

								radiogroup.destroy();
								radiogroup.init();

								radiogroup.radios.forEach(radio => {
									radio.on('Radio.deactivate', ({ event, value }) => {
										onRadioChange(
											`<strong>${value}</strong> has been deactivated!`,
										);
									});

									radio.on('Radio.activate', ({ event, value }) => {
										onRadioChange(
											`<strong>${value}</strong> has been activated!`,
										);

										setValue(radio.rootElement);
									});
								});
							}
						});
					});
				}

				radiogroup.radios.forEach(radio => {
					radio.on('Radio.activate', ({ element, value }) => {
						console.log({ element, value, event: 'activate' });

						onRadioChange(`<strong>${value}</strong> has been activated!`);

						if ($select) {
							const {
								$input: { value },
							} = radio;

							[...$select.options].forEach(option => {
								if (value === option.value) {
									option.selected = true;
								} else {
									option.selected = false;
								}
							});
						}

						if ('cheeses' === value) {
							cheeses.forEach(cheese => {
								const $input = cheese.querySelector('input');

								cheese.classList.remove('is-off');

								$input.setAttribute('tabIndex', 0);
								$input.removeAttribute('disabled');
							});
						}

						setValue(element);
					});

					radio.on('Radio.deactivate', ({ element, value }) => {
						// console.log({ element, value, event: 'deactivate' });

						onRadioChange(`<strong>${value}</strong> has been deactivated!`);

						if ('cheeses' === value) {
							cheeses.forEach(cheese => {
								const $input = cheese.querySelector('input');

								cheese.classList.add('is-off');

								$input.setAttribute('tabIndex', -1);
								$input.setAttribute('disabled', true);
							});
						}
					});
				});

				if ($select) {
					$select.addEventListener('change', ({ target }) => {
						const value = target.options[target.selectedIndex].value;

						radiogroup.deactivateAll();

						radiogroup.radios.forEach((radio, index) => {
							if (radio.$input.value === value) {
								radio.activate();

								radio.emit('Radio.activate', {
									element: radio.rootElement,
									value: radio.$input.value,
								});
								radiogroup.current = index;
							}
						});
					});
				}

				if ($add && $input) {
					$add.addEventListener('click', () => {
						const { value } = $input;

						if (0 !== value.length) {
							radiogroup.destroy();

							element.insertAdjacentHTML(
								'beforeend',
								template(value, value, false, 'condiments'),
							);

							radiogroup.init();
							radiogroup.radios[radiogroup.current].activate();

							radiogroup.radios.forEach(radio => {
								radio.on('Radio.activate', ({ event, value }) => {
									onRadioChange(`<strong>${value}</strong> has been activated!`);
									setValue(element);
								});
							});

							radiogroup.radios.forEach(radio => {
								radio.on('Radio.deactivate', ({ event, value }) => {
									onRadioChange(
										`<strong>${value}</strong> has been deactivated!`,
									);
								});
							});
						}
					});
				}
			});
		</script>
	</body>
</html>
